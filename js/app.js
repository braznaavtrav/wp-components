!function(){"use strict";var app=angular.module("app",["components"]);app.config(function($interpolateProvider){$interpolateProvider.startSymbol("<%="),$interpolateProvider.endSymbol("%>")})}(),function(){"use strict";var components=angular.module("components",["ra.services"]),baseUrl="/wp-content/themes/wp-components/components/",isAdmin=angular.element("body").hasClass("wp-admin");isAdmin&&(components.controller("ddController",["$scope","$compile",function($scope,$compile){$scope.dropped=function(dragEl,dropEl){var drop=angular.element(dropEl),drag=angular.element(dragEl),directiveHTML=drag.data("directive"),compiledDirectiveHTML=$compile("<"+directiveHTML+"></"+directiveHTML+">")($scope);drop.html(compiledDirectiveHTML)}}]),components.directive("raDraggable",["$rootScope","uuid",function($rootScope,uuid){return{restrict:"A",link:function(scope,el){angular.element(el).attr("draggable","true");var id=angular.element(el).attr("id");id||(id=uuid.new(),angular.element(el).attr("id",id)),el.bind("dragstart",function(){window.localStorage.setItem("text",id),$rootScope.$emit("RA-DRAG-START")}),el.bind("dragend",function(){$rootScope.$emit("RA-DRAG-END")})}}}]),components.directive("raDropTarget",["$rootScope","uuid",function($rootScope,uuid){return{require:"^paletteCanvas",restrict:"A",scope:{onDrop:"&"},link:function(scope,el,attrs,paletteCanvasCtrl){var id=angular.element(el).attr("id");id||(id=uuid.new(),angular.element(el).attr("id",id)),el.bind("dragover",function(e){return e.preventDefault&&e.preventDefault(),!1}),el.bind("dragenter",function(e){angular.element(e.target).hasClass("droparea")&&angular.element(e.target).addClass("ra-over")}),el.bind("dragleave",function(e){angular.element(e.target).removeClass("ra-over")}),el.bind("drop",function(e){e.preventDefault&&e.preventDefault(),e.stopPropogation&&e.stopPropogation();var data=window.localStorage.getItem("text"),dest=document.getElementById(id),src=document.getElementById(data);angular.element(src).hasClass("droparea")&&paletteCanvasCtrl.reorderSections(),angular.element(dest).hasClass("droparea")&&scope.onDrop({dragEl:src,dropEl:dest})}),$rootScope.$on("RA-DRAG-START",function(){var el=document.getElementById(id);angular.element(el).addClass("ra-target")}),$rootScope.$on("RA-DRAG-END",function(){var el=document.getElementById(id);angular.element(el).removeClass("ra-target"),angular.element(el).removeClass("ra-over")})}}}]),components.directive("paletteCanvas",function(){return{restrict:"E",templateUrl:baseUrl+"palette-canvas.html",controller:function($scope){$scope.json=angular.element("#_cmb_component_canvas-cmb-field-0").val(),$scope.sections=angular.fromJson($scope.json),$scope.directives=["carousel"],$scope.addSection=function(){console.log("addSection"),$scope.sections.push("")}},controllerAs:"paletteCanvasCtrl"}})),components.directive("carousel",function(){return{restrict:"E",require:"paletteCanvas",templateUrl:baseUrl+"carousel.html",controller:function($scope){$scope.isAdmin=isAdmin}}})}(),function(){"use strict";var module;try{module=angular.module("ra.services")}catch(e){module=angular.module("ra.services",[])}module.factory("uuid",function(){var svc={"new":function(){function _p8(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p}return _p8()+_p8(!0)+_p8(!0)+_p8()},empty:function(){return"00000000-0000-0000-0000-000000000000"}};return svc})}();